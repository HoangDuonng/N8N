{"createdAt":"2023-07-28T02:05:49.855Z","updatedAt":"2023-08-19T16:29:51.000Z","id":"437","name":"NguyenDucDung.Raon:webhook nhan booking","active":true,"nodes":[{"parameters":{"httpMethod":"POST","path":"eac699d8-c955-411b-bd4a-cfd7bbf7af83","options":{"responseData":"success"}},"id":"046830f5-0dc6-4209-be3f-e066ff807ab6","name":"Webhook","type":"n8n-nodes-base.webhook","typeVersion":1,"position":[560,440],"webhookId":"eac699d8-c955-411b-bd4a-cfd7bbf7af83"},{"parameters":{"method":"POST","url":"https://open.larksuite.com/open-apis/auth/v3/app_access_token/internal","sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"app_id\": \"cli_a45467a5a678d009\",\n    \"app_secret\": \"UZ84ksi92YWQ42ffDyJuVhOwRUKfAwj8\"\n}","options":{}},"id":"9bbc3f40-80be-47e6-bbc3-6fd881795a19","name":"HTTP Request","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[980,440]},{"parameters":{"method":"POST","url":"https://open.larksuite.com/open-apis/bitable/v1/apps/HJogb3M1iaHZa8sjKeAuCcfMs3c/tables/tblkB3AwxUpZPkRW/records","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $json[\"app_access_token\"] }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"fields\": {\n\"BookedDate\":{{ $('Code').item.json[\"BookedDate\"] }},\n\"HotelId\":\"{{ $('Code').item.json[\"HotelId\"] }}\",\n\"BookingId\":\"{{ $('Code').item.json[\"BookingId\"] }}\",\n\"BookingCode\":\"{{ $('Code').item.json[\"BookingCode\"] }}\",\n\"Status\":\"{{ $('Code').item.json[\"Status\"] }}\",\n\"CheckedIn\":{{ $('Code').item.json[\"CheckedIn\"] }},\n\"CheckedOut\":{{ $('Code').item.json[\"CheckedOut\"] }},\n\"FirstName\":\"{{ $('Code').item.json[\"FirstName\"] }}\",\n\"LastName\":\"{{ $('Code').item.json[\"LastName\"] }}\",\n\"Email\":\"{{ $('Code').item.json[\"Email\"] }}\",\n\"Phone\":\"{{ $('Code').item.json[\"Phone\"] }}\",\n\"Country\":\"{{ $('Code').item.json[\"Country\"] }}\",\n\"RoomTypeId\":\"{{ $('Code').item.json[\"RoomTypeId\"] }}\",\n\"RoomTypeName\":\"{{ $('Code').item.json[\"RoomTypeName\"] }}\",\n\"RatePlanId\":\"{{ $('Code').item.json[\"RatePlanId\"] }}\",\n\"RoomRate\":{{ $('Code').item.json[\"RoomRate\"] }},\n\"Deposit\":{{ $('Code').item.json[\"Deposit\"] }},\n\"Currency\":\"{{ $('Code').item.json[\"Currency\"] }}\",\n\"Quantity\":{{ $('Code').item.json[\"Quantity\"] }},\n\"Adult\":{{ $('Code').item.json[\"Adult\"] }},\n\"Children\":{{ $('Code').item.json[\"Children\"] }},\n\"IsGroup\":{{ $('Code').item.json[\"IsGroup\"] }},\n\"ClientName\":\"{{ $('Code').item.json[\"ClientName\"] }}\",\n\"Breakfast\":{{ $('Code').item.json[\"Breakfast\"] }},\n\"Comments\":\"{{ $('Code').item.json[\"Comments\"] }}\"\n  }\n}","options":{}},"id":"162fdd3e-fed0-4bf3-b64b-f77a84c40599","name":"HTTP Request1","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[1200,440]},{"parameters":{"mode":"runOnceForEachItem","jsCode":"// Add a new field called 'myNewField' to the JSON of the item\n$input.item.json.BookedDate = $('Webhook').item.json.body.BookedDate;\n$input.item.json.HotelId = $('Webhook').item.json.body.HotelId;\n$input.item.json.BookingId = $('Webhook').item.json.body.BookingId;\n$input.item.json.BookingCode = $('Webhook').item.json.body.BookingCode;\n$input.item.json.Status = $('Webhook').item.json.body.Status;\n$input.item.json.CheckedIn = $('Webhook').item.json.body.CheckedIn;\n$input.item.json.CheckedOut = $('Webhook').item.json.body.CheckedOut;\n$input.item.json.FirstName = $('Webhook').item.json.body.FirstName;\n$input.item.json.LastName = $('Webhook').item.json.body.LastName;\n$input.item.json.Email = $('Webhook').item.json.body.Email;\n$input.item.json.Phone = $('Webhook').item.json.body.Phone;\n$input.item.json.Country = $('Webhook').item.json.body.Country;\n$input.item.json.RoomTypeId = $('Webhook').item.json.body.RoomTypeId;\n$input.item.json.RoomTypeName = $('Webhook').item.json.body.RoomTypeName;\n$input.item.json.RatePlanId = $('Webhook').item.json.body.RatePlanId;\n$input.item.json.RoomRate = $('Webhook').item.json.body.RoomRate;\n$input.item.json.Deposit = $('Webhook').item.json.body.Deposit;\n$input.item.json.Currency = $('Webhook').item.json.body.Currency;\n$input.item.json.Quantity = $('Webhook').item.json.body.Quantity;\n$input.item.json.Adult = $('Webhook').item.json.body.Adult;\n$input.item.json.Children = $('Webhook').item.json.body.Children;\n$input.item.json.IsGroup = $('Webhook').item.json.body.IsGroup;\n$input.item.json.ClientName = $('Webhook').item.json.body.ClientName;\n$input.item.json.Breakfast = $('Webhook').item.json.body.Breakfast;\n$input.item.json.Comments = $('Webhook').item.json.body.Comments;\n\n$input.item.json.BookedDate = Date.parse($input.item.json.BookedDate)\n$input.item.json.CheckedIn = Date.parse($input.item.json.CheckedIn)\n$input.item.json.CheckedOut = Date.parse($input.item.json.CheckedOut)\n\n\nreturn $input.item;"},"id":"06ddf985-d0ef-446a-bf59-d87efd7727c4","name":"Code","type":"n8n-nodes-base.code","typeVersion":1,"position":[780,440]}],"connections":{"Webhook":{"main":[[{"node":"Code","type":"main","index":0}]]},"HTTP Request":{"main":[[{"node":"HTTP Request1","type":"main","index":0}]]},"Code":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]}},"settings":{},"staticData":null,"pinData":{},"versionId":"8b8b9c15-2059-465d-a731-85ede7a0696e","triggerCount":1,"tags":[]}