{"createdAt":"2023-04-13T09:24:55.389Z","updatedAt":"2023-07-15T02:53:35.000Z","id":"63","name":"Template convert data to Bitable format","active":false,"nodes":[{"parameters":{"method":"POST","url":"=https://open.larksuite.com/open-apis/bitable/v1/apps/{{ $input.item.json[\"appId\"] }}/tables/{{ $input.item.json[\"tableId\"] }}/records/batch_create","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $node[\"Get tenant access token\"].json.tenant_access_token }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\"records\":{{ JSON.stringify($('[Raw user list] Convert to Lark Base format').first().json.records) }}}","options":{}},"id":"b3539d41-64fc-4b6a-8081-a53b9c37fd54","name":"[Raw user list] Add records to Bitable","type":"n8n-nodes-base.httpRequest","typeVersion":3,"position":[1800,520]},{"parameters":{"jsCode":"let input = $('Get all users').first().json.data;\n\n// Convert to Lark Base format\nlet records = input.pageLists.map((user) => {\n  let fields = {\n    id: user.id,\n    firstName: user.firstName,\n    lastName: user.lastName,\n    email: {\n      text: user.email,\n      link: user.email,\n    },\n    gender: user.gender,\n    phoneNumber: user.phoneNumber,\n    userType: user.userType,\n    userCode: user.userCode,\n  };\n  return { fields };\n});\n\nlet result = { json: { records } };\nreturn result;\n"},"id":"b3075f71-7d83-406a-806a-4262c017d195","name":"[Raw user list] Convert to Lark Base format","type":"n8n-nodes-base.code","typeVersion":1,"position":[1280,520]},{"parameters":{"values":{"string":[{"name":"appId","value":"your_base_file_app_id"},{"name":"tableId","value":"your_base_file_table_id"}]},"options":{}},"id":"e399531a-5b3f-46b6-bf0b-5809e6bdca2e","name":"Set config Raw user list","type":"n8n-nodes-base.set","typeVersion":2,"position":[1500,520]}],"connections":{"[Raw user list] Convert to Lark Base format":{"main":[[{"node":"Set config Raw user list","type":"main","index":0}]]},"Set config Raw user list":{"main":[[{"node":"[Raw user list] Add records to Bitable","type":"main","index":0}]]}},"settings":{},"staticData":null,"pinData":{},"versionId":"b983df21-073a-455e-9d2a-2f92e5c175eb","triggerCount":0,"tags":[{"createdAt":"2023-04-13T09:24:58.649Z","updatedAt":"2023-06-13T07:54:39.069Z","id":"14","name":"Template"}]}