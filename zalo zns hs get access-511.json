{"createdAt":"2023-09-07T01:27:15.131Z","updatedAt":"2023-09-07T02:36:16.000Z","id":"511","name":"Zalo ZNS HS Get Access","active":true,"nodes":[{"parameters":{"values":{"string":[{"name":"appId","value":"cli_a4685e7dbc38902f"},{"name":"appSecret","value":"9Vci2vJA2PfgqavFJ9iMpdp4Mc0mvbfQ"},{"name":"record_id","value":"recrbbRVtC"},{"name":"baseId","value":"baslg84RmwKFFa1OdtUVlInI0nh"},{"name":"tableId","value":"tblRd2gV52ueSpl8"}]},"options":{"dotNotation":true}},"id":"2259c1e3-1512-4fdc-9451-6197547a508d","name":"Set","type":"n8n-nodes-base.set","typeVersion":2,"position":[1320,400]},{"parameters":{"httpMethod":"POST","path":"hsvnjsc-c062ed6f-3dfc-469c-bcc7-f249b728e1c0","options":{}},"id":"d6364c0d-7b30-4c37-b273-bf129f3c3228","name":"Webhook","type":"n8n-nodes-base.webhook","typeVersion":1,"position":[1140,400],"webhookId":"c062ed6f-3dfc-469c-bcc7-f249b728e1c0"},{"parameters":{"method":"POST","url":"=https://oauth.zaloapp.com/v4/oa/access_token?grant_type=refresh_token&app_id=2769689911199778558&refresh_token={{ $('get_id_record_lark').item.json[\"data\"][\"items\"][0][\"fields\"][\"refresh_token\"] }}","sendHeaders":true,"specifyHeaders":"json","jsonHeaders":"{\n\"Content-Type\": \"application/x-www-form-urlencoded\",\n\"secret_key\": \"n3A4lfR16FBw82YSxORR\" \n}","options":{"response":{"response":{"responseFormat":"json"}}}},"id":"0d4d04d5-ac47-48a0-8372-8709a67f47ac","name":"get_access_token_zns","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[1900,400]},{"parameters":{"method":"POST","url":"https://open.larksuite.com/open-apis/auth/v3/app_access_token/internal","sendBody":true,"specifyBody":"json","jsonBody":"={\n\"app_id\" : \"{{ $('Set').item.json[\"appId\"] }}\",\n\"app_secret\" : \"{{ $('Set').item.json[\"appSecret\"] }}\" \n}","options":{}},"id":"f03baaa3-9609-4a37-bafd-c2e6cfccfa20","name":"get_access_token_lark","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[1500,400]},{"parameters":{"url":"=https://open.larksuite.com/open-apis/bitable/v1/apps/{{ $('Set').item.json[\"baseId\"] }}/tables/{{ $('Set').item.json[\"tableId\"] }}/records?filter=CurrentValue.[record_id] = \"{{ $('Set').item.json[\"record_id\"] }}\"","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $('get_access_token_lark').item.json[\"app_access_token\"] }}"}]},"options":{}},"id":"23f6be3f-a8a8-433e-b9ae-24effdfddb61","name":"get_id_record_lark","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[1700,400]},{"parameters":{"method":"PUT","url":"=https://open.larksuite.com/open-apis/bitable/v1/apps/{{ $('Set').item.json[\"baseId\"] }}/tables/{{ $('Set').item.json[\"tableId\"]}}/records/{{ $('Set').item.json[\"record_id\"] }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $('get_access_token_lark').item.json[\"app_access_token\"] }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"fields\":\n  { \n    \"access_token\":\"{{ $('get_access_token_zns').item.json[\"access_token\"] }}\",\n    \"refresh_token\":\"{{ $('get_access_token_zns').item.json[\"refresh_token\"] }}\"\n   }\n}","options":{}},"id":"967fd0fc-b96f-4d0f-9ca8-a46da06b5a71","name":"Update","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[2080,400]},{"parameters":{"amount":24},"id":"b7cd3b81-0a19-4c7c-b902-431fc640dbf5","name":"Wait","type":"n8n-nodes-base.wait","typeVersion":1,"position":[2260,400],"webhookId":"d9362083-8e49-4f8a-86eb-3a136167d692"}],"connections":{"Set":{"main":[[{"node":"get_access_token_lark","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"Set","type":"main","index":0}]]},"get_access_token_zns":{"main":[[{"node":"Update","type":"main","index":0}]]},"get_access_token_lark":{"main":[[{"node":"get_id_record_lark","type":"main","index":0}]]},"get_id_record_lark":{"main":[[{"node":"get_access_token_zns","type":"main","index":0}]]},"Update":{"main":[[{"node":"Wait","type":"main","index":0}]]},"Wait":{"main":[[{"node":"Set","type":"main","index":0}]]}},"settings":{},"staticData":null,"pinData":{},"versionId":"f0cae2dc-faf1-4c96-8741-7e0066fd175d","triggerCount":1,"tags":[]}