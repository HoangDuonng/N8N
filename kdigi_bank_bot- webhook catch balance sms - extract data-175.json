{"createdAt":"2023-07-15T05:14:43.124Z","updatedAt":"2023-07-26T06:51:53.000Z","id":"175","name":"KDIGI_BANK_BOT: webhook catch balance sms & extract data","active":true,"nodes":[{"parameters":{"httpMethod":"POST","path":"template-kdigi-bank-bot-api","options":{}},"id":"ecfe376b-bfd7-4ab5-85b7-375a98a6139e","name":"Webhook","type":"n8n-nodes-base.webhook","typeVersion":1,"position":[40,1940],"webhookId":"b459d9da-c462-43e0-880c-12b8d6304763"},{"parameters":{"mode":"runOnceForEachItem","jsCode":"if (\n  ($('getBankData').item.json.result.transactionType.type === '-' &&\n    $input.item.json.enableOutgoing) ||\n  ($('getBankData').item.json.result.transactionType.type === '+' &&\n    $input.item.json.enableIncoming)\n) {\n  const data = $('getBankData').first().json.result;\n\n  let elements = [];\n\n  elements.push({\n    tag: 'div',\n    fields: [\n      {\n        is_short: false,\n        text: {\n          tag: 'lark_md',\n          content: `**Ngân hàng**: ${data.bankName.toUpperCase()}`,\n        },\n      },\n      {\n        is_short: false,\n        text: {\n          tag: 'lark_md',\n          content: `**Số tài khoản**: ${data.receiverAccount}`,\n        },\n      },\n      {\n        is_short: false,\n        text: {\n          tag: 'lark_md',\n          content: `**Số dư thay đổi:** ${data.transactionType.type} ${data.transactionAmount.amountText} VND`,\n        },\n      },\n      {\n        is_short: false,\n        text: {\n          tag: 'lark_md',\n          content: `**Nội dung:** ${data.transactionMessage}`,\n        },\n      },\n    ],\n  });\n\n  // Append transaction ID if exist\n  if (data.transactionId) {\n    elements[0].fields.push({\n      is_short: false,\n      text: {\n        tag: 'lark_md',\n        content: `**Mã giao dịch:** ${data.transactionId}`,\n      },\n    });\n  }\n\n  // Append received time\n  elements[0].fields.push({\n    is_short: false,\n    text: {\n      tag: 'lark_md',\n      content: `**Thời gian nhận:** ${data.receivedTime.text}`,\n    },\n  });\n\n  // Kiểm tra enableBalance nếu true thì thêm phần tử \"Số dư tạm tính\" vào mảng fields\n  if ($input.item.json.enableBalance) {\n    const balanceIndex = elements[0].fields.findIndex((field) =>\n      field?.text?.content?.includes('Số dư thay đổi')\n    );\n    if (balanceIndex !== -1) {\n      elements[0].fields.splice(balanceIndex + 1, 0, {\n        is_short: false,\n        text: {\n          tag: 'lark_md',\n          content: `**Số dư tạm tính**: ${data.balance.amountText} VND`,\n        },\n      });\n    }\n  }\n\n  // create message card\n  let result = {\n    msg_type: 'interactive',\n    card: {\n      config: {\n        wide_screen_mode: true,\n      },\n      header: {\n        template: data.larkMessConfig?.cardColor ?? 'blue',\n        title: {\n          content: `${data.bankName.toUpperCase()}-${data.receiverAccount} (${\n            data.transactionType.type\n          }) ${data.transactionAmount.amountText}VND`,\n          tag: 'plain_text',\n        },\n      },\n      elements,\n    },\n  };\n\n  return {\n    json: {\n      isSend: true,\n      data: result,\n      customBotURL: $input.item.json.customBotURL,\n    },\n  };\n}\n\nreturn {\n  json: {\n    isSend: false,\n  },\n};\n"},"id":"09ab9919-775f-42c2-8a55-99b2416b44ff","name":"Convert to Lark Message Card","type":"n8n-nodes-base.code","typeVersion":1,"position":[2360,1940]},{"parameters":{"method":"POST","url":"=https://open.larksuite.com/open-apis/auth/v3/tenant_access_token/internal/","sendBody":true,"specifyBody":"json","jsonBody":"={ \"app_id\" : \"{{ $input.item.json[\"appId\"] }}\", \"app_secret\" : \"{{ $input.item.json[\"appSecret\"] }}\" }","options":{}},"id":"342ee0e1-4d6b-4133-a6f0-929b59a38358","name":"Get Lark tenant access token","type":"n8n-nodes-base.httpRequest","typeVersion":3,"position":[1280,1680]},{"parameters":{"method":"POST","url":"={{ $input.item.json.customBotURL }}","sendBody":true,"specifyBody":"json","jsonBody":"={{ JSON.stringify($input.item.json.data)}}","options":{}},"id":"7941d381-e47a-4a19-a6aa-c69d8849313d","name":"[Lark] Send noti to group chat","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[2740,1800]},{"parameters":{"mode":"runOnceForEachItem","jsCode":"if (\n  ($('getBankData').item.json.result.transactionType.type === '-' &&\n    $input.item.json.enableOutgoing) ||\n  ($('getBankData').item.json.result.transactionType.type === '+' &&\n    $input.item.json.enableIncoming)\n) {\n  const data = $('getBankData').first().json.result;\n\n  // Convert to Lark Base format\n  const records = [\n    {\n      fields: {\n        ID: data.bankName + '-' + data.receiverAccount,\n        Bank: data.bankName.toUpperCase(),\n        Account: data.receiverAccount,\n        'Transaction Type': data.transactionType.typeText,\n        Debit:\n          data.transactionType.type === '+'\n            ? data.transactionAmount.amount\n            : undefined,\n        Credit:\n          data.transactionType.type === '-'\n            ? data.transactionAmount.amount\n            : undefined,\n        'Transaction ID': data.transactionId,\n        'Transaction Message': data.transactionMessage,\n        'Original Message': data.originalMessage,\n        'Transaction Time': data.transactionTime.timestamp,\n        'Time received': data.receivedTime.timestamp,\n      },\n    },\n  ];\n\n  // Kiểm tra enableBalance nếu true thì thêm phần tử \"Balance\" vào mảng fields\n  if ($input.item.json.enableBalance) {\n    records[0].fields = {\n      ...records[0].fields,\n      Balance: data.balance.amount,\n    };\n  }\n\n  return {\n    json: {\n      isSend: true,\n      records,\n      configs: {\n        baseId: $input.item.json.baseId,\n        tableId: $input.item.json.tableId,\n      },\n    },\n  };\n}\n\nreturn {\n  json: {\n    isSend: false,\n  },\n};\n"},"id":"a5bc2527-cf99-4a85-805a-6b7c3b7d04ea","name":"Convert to Lark Base format","type":"n8n-nodes-base.code","typeVersion":1,"position":[2320,1580]},{"parameters":{"method":"POST","url":"=https://open.larksuite.com/open-apis/bitable/v1/apps/{{ $json[\"configs\"][\"baseId\"] }}/tables/{{  $json[\"configs\"][\"tableId\"]}}/records/batch_create","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $node[\"Get Lark tenant access token\"].json.tenant_access_token }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\"records\":{{ JSON.stringify($json[\"records\"]) }}}","options":{}},"id":"38a9e5f9-1ce7-4710-b980-0b01a0d20105","name":"[SMS Log] Add records to Bitable","type":"n8n-nodes-base.httpRequest","typeVersion":3,"position":[2700,1500]},{"parameters":{"conditions":{"boolean":[{"value1":"={{ $json.isBankSupport }}","value2":true}]}},"id":"e74df616-7a7b-4204-8a4c-85cd1fb3ae43","name":"ifBankSupport","type":"n8n-nodes-base.if","typeVersion":1,"position":[460,1940]},{"parameters":{"method":"POST","url":"https://app.n8n.vn/webhook/kdigi-bank-bot-process-data","sendBody":true,"specifyBody":"json","jsonBody":"={{ JSON.stringify($input.first().json.body) }}","options":{}},"id":"219db1be-36a2-41a7-ac09-f18714758635","name":"getBankData","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[240,1940]},{"parameters":{},"id":"ac6260e2-d132-40b6-b91b-495b9843c850","name":"Start Actions","type":"n8n-nodes-base.noOp","typeVersion":1,"position":[660,1920]},{"parameters":{"mode":"runOnceForEachItem","jsCode":"if (\n  ($('getBankData').item.json.result.transactionType.type === '-' &&\n    $input.item.json.enableOutgoing) ||\n  ($('getBankData').item.json.result.transactionType.type === '+' &&\n    $input.item.json.enableIncoming)\n) {\n  const data = $('getBankData').first().json.result;\n\n  let message = [];\n\n  message.push(\n    `<b>${data.bankName.toUpperCase()}-${data.receiverAccount} (${\n      data.transactionType.type\n    }) ${data.transactionAmount.amountText}VND</b>\\n`,\n    `<b>Ngân hàng:</b> ${data.bankName.toUpperCase()}`,\n    `<b>Số tài khoản:</b> ${data.receiverAccount}`,\n    `<b>Số dư thay đổi:</b> ${data.transactionType.type} ${data.transactionAmount.amountText} VND`\n  );\n\n  // Add balance\n  if ($input.item.json.enableBalance) {\n    message.push(`<b>Số dư tạm tính:</b> ${data.balance.amountText} VND`);\n  }\n\n  message.push(`<b>Nội dung:</b>\\n ${data.transactionMessage}`);\n\n  // Check transaction ID\n  if (data.transactionId) {\n    message.push(`<b>Mã giao dịch:</b> ${data.transactionId}`);\n  }\n\n  message.push(`<b>Thời gian nhận:</b> ${data.receivedTime.text}`);\n\n  return {\n    json: {\n      isSend: true,\n      botToken: $input.item.json.botToken,\n      payload: {\n        chat_id: $input.item.json.chatId,\n        parse_mode: 'HTML',\n        text: message.join('\\n'),\n      },\n    },\n  };\n}\n\nreturn {\n  json: {\n    isSend: false,\n  },\n};\n"},"id":"e48439a7-73d5-4338-8c00-6f95309ec4dc","name":"Create Telegram Message","type":"n8n-nodes-base.code","typeVersion":1,"position":[1720,2540]},{"parameters":{"method":"POST","url":"=https://api.telegram.org/bot{{ $input.item.json.botToken }}/sendMessage ","sendBody":true,"specifyBody":"json","jsonBody":"={{ JSON.stringify($input.item.json.payload) }}","options":{}},"id":"73ab302a-b5bb-4ef3-965e-ac7e554c23e2","name":"Send to Telegram chat","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[2180,2460]},{"parameters":{"values":{"string":[{"name":"appId","value":"cli_a33cd37530b8900a"},{"name":"appSecret","value":"qNz8YxoCCZoGm9Nlm2bOrcUriJsJtHHD"}]},"options":{}},"id":"2699e14f-8b68-429b-b28f-d911ef2e03cb","name":"Set Lark Configs","type":"n8n-nodes-base.set","typeVersion":2,"position":[1100,1680]},{"parameters":{"values":{"string":[{"name":"customBotURL","value":"https://open.larksuite.com/open-apis/bot/v2/hook/b8407056-e8cc-45d0-bfc6-7893201c4ff4"}],"boolean":[{"name":"enableBalance","value":true},{"name":"enableOTP"},{"name":"enableOutgoing","value":true},{"name":"enableIncoming"}]},"options":{}},"id":"74bca4c7-84b5-4747-a88c-31a5e7fce354","name":"Set Lark Mess Config","type":"n8n-nodes-base.set","typeVersion":2,"position":[1720,1820]},{"parameters":{"values":{"string":[{"name":"baseId","value":"Vz9eb7avZa95IUsOk99uji8Fsdd"},{"name":"tableId","value":"tbl9prfOWONpDCbk"}],"boolean":[{"name":"enableBalance"},{"name":"enableOTP"},{"name":"enableOutgoing"},{"name":"enableIncoming","value":true}]},"options":{}},"id":"9228e0d1-5c6f-4796-830c-ea349189cb3c","name":"Set Lark Base Config","type":"n8n-nodes-base.set","typeVersion":2,"position":[1720,1420]},{"parameters":{},"id":"f79f400e-f1c7-4bd1-af16-7034946023ff","name":"Start Lark Actions","type":"n8n-nodes-base.noOp","typeVersion":1,"position":[940,1680]},{"parameters":{},"id":"7cde2088-3672-4dd3-a6d7-baf9d0ea64e1","name":"Start Lark Base","type":"n8n-nodes-base.noOp","typeVersion":1,"position":[1500,1540]},{"parameters":{},"id":"a56c5f2d-b250-4dd1-a6f7-8d36814ec9c6","name":"Start Lark Mess","type":"n8n-nodes-base.noOp","typeVersion":1,"position":[1500,1900]},{"parameters":{},"id":"073c5442-5ce5-4e01-8857-934701555bc4","name":"Start Telegram Actions","type":"n8n-nodes-base.noOp","typeVersion":1,"position":[920,2460]},{"parameters":{"values":{"string":[{"name":"botToken","value":"6141412510:AAEVEPZcCa7Hehbb9pfnX7M9cpd0f5rK1q4"},{"name":"chatId","value":"-1001958985351"}],"boolean":[{"name":"enableBalance"},{"name":"enableOTP"},{"name":"enableOutgoing"},{"name":"enableIncoming"}]},"options":{}},"id":"144b8810-43cf-488b-b76e-107b3de16746","name":"Set Telegram Config","type":"n8n-nodes-base.set","typeVersion":2,"position":[1120,2340]},{"parameters":{},"id":"27532d7e-3783-4d8e-8233-2eb303d3a20c","name":"Start Lark Base Actions","type":"n8n-nodes-base.noOp","typeVersion":1,"position":[1940,1520]},{"parameters":{},"id":"59d3db54-3bcb-4dd3-a36f-81fbfb5337a1","name":"Start Lark Mess Actions","type":"n8n-nodes-base.noOp","typeVersion":1,"position":[1940,1880]},{"parameters":{"mode":"runOnceForEachItem","jsCode":"const smsContent = $('Webhook').first().json.body;\n\n// create message card\nlet result = {\n  msg_type: 'text',\n  content: {\n    text: `Từ: ${smsContent.from}\\n${smsContent.text.toString()}`,\n  },\n};\n\nreturn {\n  json: {\n    data: result,\n    customBotURL: $input.item.json.customBotURL,\n  },\n};\n"},"id":"ee3b2f3a-8cb4-4310-9238-50ed0078e574","name":"Convert to Message Card for OTP","type":"n8n-nodes-base.code","typeVersion":1,"position":[2360,1780]},{"parameters":{},"id":"aa2619e0-3348-4770-afce-485d8608a472","name":"Start Telegram Mess Actions","type":"n8n-nodes-base.noOp","typeVersion":1,"position":[1320,2460]},{"parameters":{"mode":"runOnceForEachItem","jsCode":"const smsContent = $('Webhook').first().json.body;\n\nlet message = [];\n\nmessage.push(\n  `<b>${smsContent.from.toUpperCase()}</b>\\n`,\n  `${smsContent.text.toString()}`\n);\n\nreturn {\n  json: {\n    botToken: $input.item.json.botToken,\n    payload: {\n      chat_id: $input.item.json.chatId,\n      parse_mode: 'HTML',\n      text: message.join('\\n'),\n    },\n  },\n};\n"},"id":"2f41c6f8-8c0d-4c05-9cbf-6e206b27877a","name":"Create Telegram Message for OTP","type":"n8n-nodes-base.code","typeVersion":1,"position":[1720,2380]},{"parameters":{"conditions":{"boolean":[{"value1":"={{ $input.item.json.isSend }}","value2":true}]}},"id":"6db544af-d779-4b75-a7b9-dedf28270696","name":"ifSend","type":"n8n-nodes-base.if","typeVersion":1,"position":[2560,1940]},{"parameters":{"values":{"string":[{"name":"customBotURL","value":"https://open.larksuite.com/open-apis/bot/v2/hook/e992e2f1-ab1d-42fd-b217-2277b9df58aa"}],"boolean":[{"name":"enableBalance"},{"name":"enableOTP"},{"name":"enableOutgoing"},{"name":"enableIncoming","value":true}]},"options":{}},"id":"a4355cd9-8d02-48eb-a7c8-bddcd0227b75","name":"Set Lark Mess Config1","type":"n8n-nodes-base.set","typeVersion":2,"position":[1720,2000]},{"parameters":{"conditions":{"boolean":[{"value1":"={{ $input.item.json.isSend }}","value2":true}]}},"id":"883377ea-c37e-49a1-99b8-c46e73edd080","name":"ifSend1","type":"n8n-nodes-base.if","typeVersion":1,"position":[2500,1580]},{"parameters":{"values":{"string":[{"name":"baseId","value":"Vz9eb7avZa95IUsOk99uji8Fsdd"},{"name":"tableId","value":"tbl9prfOWONpDCbk"}],"boolean":[{"name":"enableBalance"},{"name":"enableOTP"},{"name":"enableOutgoing"},{"name":"enableIncoming"}]},"options":{}},"id":"ca2c459b-481a-4069-b0dc-37bc3dfbd86b","name":"Set Lark Base Config1","type":"n8n-nodes-base.set","typeVersion":2,"position":[1720,1580]},{"parameters":{"values":{"string":[{"name":"botToken","value":"6380831923:AAFzYGZTFmXbqKWgNu6Drj6IbERm2j9XYQ8"},{"name":"chatId","value":"-1001958985351"}],"boolean":[{"name":"enableBalance"},{"name":"enableOTP"},{"name":"enableOutgoing"},{"name":"enableIncoming"}]},"options":{}},"id":"ddfdd6ea-2405-4d76-ad5a-5c292b9e5d21","name":"Set Telegram Config1","type":"n8n-nodes-base.set","typeVersion":2,"position":[1120,2580]},{"parameters":{"conditions":{"boolean":[{"value1":"={{ $input.item.json.isSend }}","value2":true}]}},"id":"96edbfbe-ebe6-4f83-b1de-e9aa4fdbffef","name":"ifSend2","type":"n8n-nodes-base.if","typeVersion":1,"position":[1940,2540]},{"parameters":{"values":{"string":[{"name":"botToken","value":"6319174707:AAGXbX_bYMcHUTK0gD6WT159QUL3RqMJ_lo"},{"name":"chatId","value":"-1001958985351"}],"boolean":[{"name":"enableBalance"},{"name":"enableOTP"},{"name":"enableOutgoing"},{"name":"enableIncoming"}]},"options":{}},"id":"ac86a9f4-3a32-4e16-8c47-1a7aaf4131d2","name":"Set Telegram Config2","type":"n8n-nodes-base.set","typeVersion":2,"position":[1120,2780]},{"parameters":{"values":{"string":[{"name":"customBotURL","value":"https://open.larksuite.com/open-apis/bot/v2/hook/3b18fb71-01b6-4429-8ff7-ab87c12cdad0"}],"boolean":[{"name":"enableBalance"},{"name":"enableOTP","value":true},{"name":"enableOutgoing"},{"name":"enableIncoming"}]},"options":{}},"id":"6e3b6b63-abe1-472a-98e6-512e726c8914","name":"Set Lark Mess Config2","type":"n8n-nodes-base.set","typeVersion":2,"position":[1720,2160]},{"parameters":{"mode":"runOnceForEachItem","jsCode":"const smsContent = $('Webhook').first().json.body;\n\n  // Convert to Lark Base format\n  const records = [\n    {\n      fields: {\n        ID: smsContent.from,\n        Bank: smsContent.from,\n        'Transaction Type': 'OTP',\n        'Transaction Message': smsContent.text.toString(),\n        'Original Message': smsContent.text.toString(),\n        'Time received': smsContent.sentStamp,\n      },\n    },\n  ];\n\n  return {\n    json: {\n      records,\n      configs: {\n        baseId: $input.item.json.baseId,\n        tableId: $input.item.json.tableId,\n      },\n    },\n  };\n"},"id":"e20e3568-884a-4fd7-8437-36a9a5c34c9b","name":"Convert to Lark Base format OTP","type":"n8n-nodes-base.code","typeVersion":1,"position":[2320,1340]},{"parameters":{"conditions":{"string":[{"value1":"={{ $('Webhook').item.json.body.text }}","operation":"contains","value2":"OTP"}],"boolean":[{"value1":"={{ $input.item.json.enableOTP }}","value2":true}]}},"id":"337818f2-e6b6-45ca-be22-2ab3a1fa377b","name":"ifOTPLarkBase","type":"n8n-nodes-base.if","typeVersion":1,"position":[2120,1520]},{"parameters":{"conditions":{"string":[{"value1":"={{ $('Webhook').item.json.body.text }}","operation":"contains","value2":"OTP"}],"boolean":[{"value1":"={{ $input.item.json.enableOTP }}","value2":true}]}},"id":"260ed9eb-d8bf-450a-85ba-3ea72cdf1fee","name":"ifOTPLarkMess","type":"n8n-nodes-base.if","typeVersion":1,"position":[2100,1880]},{"parameters":{"conditions":{"string":[{"value1":"={{ $('Webhook').item.json.body.text }}","operation":"contains","value2":"OTP"}],"boolean":[{"value1":"={{ $input.item.json.enableOTP }}","value2":true}]}},"id":"e3c8908d-3450-448c-aebe-3cde7fb44738","name":"ifOTPTelegram","type":"n8n-nodes-base.if","typeVersion":1,"position":[1500,2460]}],"connections":{"Webhook":{"main":[[{"node":"getBankData","type":"main","index":0}]]},"Convert to Lark Message Card":{"main":[[{"node":"ifSend","type":"main","index":0}]]},"Get Lark tenant access token":{"main":[[{"node":"Start Lark Base","type":"main","index":0}]]},"Convert to Lark Base format":{"main":[[{"node":"ifSend1","type":"main","index":0}]]},"ifBankSupport":{"main":[[{"node":"Start Actions","type":"main","index":0}]]},"getBankData":{"main":[[{"node":"ifBankSupport","type":"main","index":0}]]},"Create Telegram Message":{"main":[[{"node":"ifSend2","type":"main","index":0}]]},"Set Lark Configs":{"main":[[{"node":"Get Lark tenant access token","type":"main","index":0}]]},"Set Lark Mess Config":{"main":[[{"node":"Start Lark Mess Actions","type":"main","index":0}]]},"Set Lark Base Config":{"main":[[{"node":"Start Lark Base Actions","type":"main","index":0}]]},"Start Lark Actions":{"main":[[{"node":"Set Lark Configs","type":"main","index":0}]]},"Start Telegram Actions":{"main":[[{"node":"Set Telegram Config","type":"main","index":0},{"node":"Set Telegram Config1","type":"main","index":0},{"node":"Set Telegram Config2","type":"main","index":0}]]},"Set Telegram Config":{"main":[[{"node":"Start Telegram Mess Actions","type":"main","index":0}]]},"Start Lark Base Actions":{"main":[[{"node":"ifOTPLarkBase","type":"main","index":0}]]},"Start Lark Mess Actions":{"main":[[{"node":"ifOTPLarkMess","type":"main","index":0}]]},"Convert to Message Card for OTP":{"main":[[{"node":"[Lark] Send noti to group chat","type":"main","index":0}]]},"Start Telegram Mess Actions":{"main":[[{"node":"ifOTPTelegram","type":"main","index":0}]]},"Create Telegram Message for OTP":{"main":[[{"node":"Send to Telegram chat","type":"main","index":0}]]},"ifSend":{"main":[[{"node":"[Lark] Send noti to group chat","type":"main","index":0}]]},"Set Lark Mess Config1":{"main":[[{"node":"Start Lark Mess Actions","type":"main","index":0}]]},"ifSend1":{"main":[[{"node":"[SMS Log] Add records to Bitable","type":"main","index":0}]]},"Set Lark Base Config1":{"main":[[{"node":"Start Lark Base Actions","type":"main","index":0}]]},"Set Telegram Config1":{"main":[[{"node":"Start Telegram Mess Actions","type":"main","index":0}]]},"ifSend2":{"main":[[{"node":"Send to Telegram chat","type":"main","index":0}]]},"Set Telegram Config2":{"main":[[{"node":"Start Telegram Mess Actions","type":"main","index":0}]]},"Set Lark Mess Config2":{"main":[[{"node":"Start Lark Mess Actions","type":"main","index":0}]]},"Convert to Lark Base format OTP":{"main":[[{"node":"[SMS Log] Add records to Bitable","type":"main","index":0}]]},"ifOTPLarkBase":{"main":[[{"node":"Convert to Lark Base format OTP","type":"main","index":0}],[{"node":"Convert to Lark Base format","type":"main","index":0}]]},"ifOTPLarkMess":{"main":[[{"node":"Convert to Message Card for OTP","type":"main","index":0}],[{"node":"Convert to Lark Message Card","type":"main","index":0}]]},"ifOTPTelegram":{"main":[[{"node":"Create Telegram Message for OTP","type":"main","index":0}],[{"node":"Create Telegram Message","type":"main","index":0}]]},"Start Actions":{"main":[[]]},"Start Lark Mess":{"main":[[{"node":"Set Lark Mess Config","type":"main","index":0}]]},"Start Lark Base":{"main":[[{"node":"Set Lark Base Config","type":"main","index":0}]]}},"settings":{},"staticData":null,"pinData":{"Webhook":[{"json":{"headers":{"host":"app.n8n.vn","user-agent":"SMS Forwarder App","transfer-encoding":"chunked","accept-encoding":"gzip","content-type":"application/json; charset=utf-8","x-forwarded-for":"14.179.3.141","x-forwarded-host":"app.n8n.vn","x-forwarded-port":"443","x-forwarded-proto":"https","x-forwarded-server":"f2605f992776","x-real-ip":"14.179.3.141"},"params":{},"query":{},"body":{"from":"SEABANK","text":"15/07/23 12:10 TK 887888 phat sinh +5,432VND. SD: 5,910VND. ND: MBVCB.3857128806.038966.LE QUOC KHO I chuyen tien abc.CT tu 6681888888 LE QUOC KHOI toi 88788...","sentStamp":1689410517000,"receivedStamp":1689410517697,"sim":"sim1"}}}]},"versionId":"f0867bae-da9f-4ac4-a015-baf78d841829","triggerCount":1,"tags":[{"createdAt":"2023-01-05T09:55:57.214Z","updatedAt":"2023-01-05T09:55:57.214Z","id":"1","name":"Lark"},{"createdAt":"2023-07-15T01:37:36.669Z","updatedAt":"2023-07-15T01:37:36.669Z","id":"27","name":"KDIGI"}]}