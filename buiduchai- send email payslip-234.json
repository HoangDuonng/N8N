{"createdAt":"2023-07-27T14:11:09.735Z","updatedAt":"2023-09-07T01:56:06.000Z","id":"234","name":"BuiDucHai: Send email Payslip","active":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"sd3gdo2jsbs-send-payslip","options":{}},"id":"065349b3-69d6-432e-b6a8-77bbd547c1be","name":"Webhook","type":"n8n-nodes-base.webhook","typeVersion":1,"position":[180,380],"webhookId":"dbb95871-fa83-4fad-a027-88bf6af93796"},{"parameters":{"fromEmail":"=Payslip - BH Global <payslip@bhblobal.io>","toEmail":"={{ $('Webhook').item.json[\"query\"][\"email\"] }}","subject":"= [BH Global]Bảng lương {{ $('Webhook').item.json[\"query\"][\"thang\"] }}","html":"=<!DOCTYPE html>\n<html>\n  <head>\n    <title>Bảng lương</title>\n    <style>\n      body {\n        background-color: #f5f5f5;\n        font-family: Arial, sans-serif;\n      }\n      h1 {\n        text-align: center;\n        margin-top: 2rem;\n        margin-bottom: 2rem;\n        color: #333;\n        text-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n      }\n      table {\n        border-collapse: collapse;\n        width: 100%;\n        margin: 0 auto;\n        margin-bottom: 1rem;\n        box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);\n        background: linear-gradient(to bottom, #f2f2f2, #fff);\n      }\n      th,\n      td {\n        padding: 1rem;\n        border: 1px solid #ddd;\n        text-align: center;\n        color: #333;\n      }\n      tr:nth-child(even) {\n        background-color: #e0e0e0;\n      }\n      tr:nth-child(odd) {\n        background-color: #f5f5f5;\n      }\n      .logo {\n        display: block;\n        margin: 0 auto;\n        max-width: 200px;\n      }\n      .container {\n        text-align: center;\n      }\n    </style>\n </head>\n  <body>\n    <div class=\"container\">\n      <img src=\"https://trello.com/1/cards/64c92509a1e11d615655920d/attachments/64c92513f1b8e8a4a5463396/download/logo_BH_GLOBAL-01.png\" class=\"logo\">\n      <h1>Bảng lương của {{ $('Webhook').item.json[\"query\"][\"tenNV\"] }}</h1>\n      <table>\n        <tbody>\n        {{ $('Code').item.json[\"htmlLuong\"] }}\n        {{ $('Code').item.json[\"htmlTraffic\"] }}\n        {{ $('Code').item.json[\"htmlGuiXe\"] }}\n        {{ $('Code').item.json[\"htmlThuong\"] }}\n        {{ $('Code').item.json[\"htmlPhat\"] }}\n        {{ $('Code').item.json[\"htmlKPI\"] }}\n        {{ $('Code').item.json[\"htmlTamUng\"] }}\n        {{ $('Code').item.json[\"htmlPhatMuon\"] }}\n        {{ $('Code').item.json[\"htmlThucNhan\"] }}\n        </tbody>\n      </table>\n      <p style=\"color:red;\">\nChú ý: Thông tin lương là bảo mật, nếu có bất cứ khiếu nại gì về lương, vui lòng reply email này trong vòng 2 ngày sau khi nhận email. Sau 2 ngày, công ty không có trách nhiệm xử lý khiếu nại nữa. Cảm ơn bạn!</p>\n    </div>\n  </body>\n</html>","options":{}},"id":"5cf9057a-bee3-4344-8a15-1af837e5d4de","name":"Send Email1","type":"n8n-nodes-base.emailSend","typeVersion":1,"position":[560,380],"credentials":{"smtp":{"id":"100","name":"SMTP account 9"}}},{"parameters":{"mode":"runOnceForEachItem","jsCode":"// Add a new field called 'myNewField' to the JSON of the item\nconst config = { style: 'currency', currency: 'VND'}\n$input.item.json.htmlLuong = \"\"\nif ($('Webhook').item.json.query.luong) {\n  $input.item.json.htmlLuong = \"<tr><th>Lương</th><td>\" + new Intl.NumberFormat('vi-VN', config).format($('Webhook').item.json.query.luong) + \"</td></tr>\"\n}\n$input.item.json.htmlTraffic = \"\"\nif ($('Webhook').item.json.query.traffice) {\n  $input.item.json.htmlTraffic = \"<tr><th>Thưởng Traffic</th><td>\" + new Intl.NumberFormat('vi-VN', config).format($('Webhook').item.json.query.traffice.replaceAll(\"[\",\"\").replaceAll(\"]\",\"\")) + \"</td></tr>\"\n}\n$input.item.json.htmlGuiXe = \"\"\nif ($('Webhook').item.json.query.guiXe) {\n  $input.item.json.htmlGuiXe = \"<tr><th>Phụ Cấp Gửi Xe</th><td>\" + new Intl.NumberFormat('vi-VN', config).format($('Webhook').item.json.query.guiXe.replaceAll(\"[\",\"\").replaceAll(\"]\",\"\")) + \"</td></tr>\"\n}\n$input.item.json.htmlThuong = \"\"\nif ($('Webhook').item.json.query.thuong) {\n  $input.item.json.htmlThuong = \"<tr><th>Thưởng</th><td>\" + new Intl.NumberFormat('vi-VN', config).format($('Webhook').item.json.query.thuong.replaceAll(\"[\",\"\").replaceAll(\"]\",\"\")) + \"</td></tr>\"\n}\n$input.item.json.htmlPhat = \"\"\nif ($('Webhook').item.json.query.phat) {\n  $input.item.json.htmlPhat = \"<tr><th>Phạt</th><td>\" + new Intl.NumberFormat('vi-VN', config).format($('Webhook').item.json.query.phat.replaceAll(\"[\",\"\").replaceAll(\"]\",\"\")) + \"</td></tr>\"\n}\n$input.item.json.htmlKPI = \"\"\nif ($('Webhook').item.json.query.kpi) {\n  $input.item.json.htmlKPI = \"<tr><th>Phạt KPI</th><td>\" + new Intl.NumberFormat('vi-VN', config).format($('Webhook').item.json.query.kpi.replaceAll(\"[\",\"\").replaceAll(\"]\",\"\")) + \"</td></tr>\"\n}\n$input.item.json.htmlTamUng = \"\"\nif ($('Webhook').item.json.query.tamUng) {\n  $input.item.json.htmlTamUng = \"<tr><th>Đã Tạm Ứng</th><td>\" + new Intl.NumberFormat('vi-VN', config).format($('Webhook').item.json.query.tamUng) + \"</td></tr>\"\n}\n$input.item.json.htmlPhatMuon = \"\"\nif ($('Webhook').item.json.query.phatMuon) {\n  $input.item.json.htmlPhatMuon = \"<tr><th>Phạt Đi Muộn</th><td>\" + new Intl.NumberFormat('vi-VN', config).format($('Webhook').item.json.query.phatMuon.replaceAll(\"[\",\"\").replaceAll(\"]\",\"\")) + \"</td></tr>\"\n}\n\n$input.item.json.htmlThucNhan = \"<tr><th>Tổng lương thực nhận</th><td><b>\" + new Intl.NumberFormat('vi-VN', config).format($('Webhook').item.json.query.thucNhan.replaceAll(\"[\",\"\").replaceAll(\"]\",\"\")) + \"</b></td></tr>\"\n\nreturn $input.item;"},"id":"cb8a1aff-760c-485c-8994-77273c0ffde8","name":"Code","type":"n8n-nodes-base.code","typeVersion":1,"position":[360,380]}],"connections":{"Webhook":{"main":[[{"node":"Code","type":"main","index":0}]]},"Code":{"main":[[{"node":"Send Email1","type":"main","index":0}]]}},"settings":{},"staticData":null,"pinData":{},"versionId":"a0800bb8-d479-4d95-89a9-941736cadc1a","triggerCount":1,"tags":[]}