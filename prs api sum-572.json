{"createdAt":"2023-11-13T10:33:24.951Z","updatedAt":"2023-11-18T12:18:38.000Z","id":"572","name":"PRS API SUM","active":true,"nodes":[{"parameters":{},"id":"00d1dcbb-4114-4e02-b625-202298340bf9","name":"When clicking \"Execute Workflow\"","type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[100,660]},{"parameters":{"keepOnlySet":true,"values":{"string":[{"name":"api","value":"https://dstt.postmart.vn/api/prs/v2/"},{"name":"token","value":"7a51b166dfe235dfec2901a24ed2f671"},{"name":"modules[0]","value":"salesOrder"},{"name":"modules[1]","value":"salesOrderProvince"},{"name":"modules[2]","value":"goodsReceipt"},{"name":"apiCom","value":"https://dstt.postmart.com.vn/api/prs/v2/"},{"name":"modules[3]","value":"goodsReceiptProvince"}],"number":[{"name":"limit","value":50}]},"options":{}},"id":"9f457704-65b2-4cb1-a408-2ca160f84f68","name":"meta","type":"n8n-nodes-base.set","typeVersion":2,"position":[320,660]},{"parameters":{"fieldToSplitOut":"modules","options":{"destinationFieldName":"module"}},"id":"0717eeb4-efe2-40a2-812a-304ce05136ec","name":"ModuleLists","type":"n8n-nodes-base.itemLists","typeVersion":2.1,"position":[540,660]},{"parameters":{"rule":{"interval":[{"field":"minutes","minutesInterval":30}]}},"id":"37dec0df-34ee-4681-9b6a-d063510eb230","name":"Schedule Trigger","type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.1,"position":[100,920]},{"parameters":{"options":{}},"id":"46c51fbf-1251-4afa-93bc-2b6d47c9eb71","name":"Set","type":"n8n-nodes-base.set","typeVersion":2,"position":[1020,560]},{"parameters":{"batchSize":1,"options":{}},"id":"ef2d4b5d-c85a-446c-86ea-9b6760fbbe50","name":"SplitModules","type":"n8n-nodes-base.splitInBatches","typeVersion":2,"position":[800,660]},{"parameters":{"url":"={{ $('meta').item.json.apiCom }}sum/contents/{{ $json.module }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"token","value":"{{ $('meta').item.json.token }}"}]},"options":{"response":{"response":{"fullResponse":true}}}},"id":"d97ce46b-cf4f-41b3-81b6-f3ddfc434ef4","name":"getCalulateSum","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[1240,560],"retryOnFail":true},{"parameters":{"fieldToSplitOut":"=body.data","options":{"destinationFieldName":"item"}},"id":"5799786a-5f6f-4805-b397-e7d44154c921","name":"Item Lists","type":"n8n-nodes-base.itemLists","typeVersion":2.1,"position":[1460,560]},{"parameters":{"method":"POST","url":"={{ $('meta').item.json.apiCom }}sum/contents/{{ $('Set').item.json.module }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"token","value":"={{ $('meta').item.json.token }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={{ $json.item }}","options":{"response":{"response":{"fullResponse":true}}}},"id":"2e107720-894f-45e3-9ae2-5099d7bd8fbf","name":"updateCalulateSum","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[1920,540],"retryOnFail":true},{"parameters":{"conditions":{"boolean":[{"value1":"={{ $('SplitItems').context[\"noItemsLeft\"] }}","value2":true}]}},"id":"5e6cdc77-c8ca-4541-95b7-36a02da6d566","name":"ifDoneItem","type":"n8n-nodes-base.if","typeVersion":1,"position":[2180,780]},{"parameters":{"batchSize":1,"options":{"reset":"={{ $('SplitItems').context[\"noItemsLeft\"] }}"}},"id":"e1a75e61-99d6-454d-b5be-f32a21b5e7e3","name":"SplitItems","type":"n8n-nodes-base.splitInBatches","typeVersion":2,"position":[1700,560]}],"connections":{"When clicking \"Execute Workflow\"":{"main":[[{"node":"meta","type":"main","index":0}]]},"meta":{"main":[[{"node":"ModuleLists","type":"main","index":0}]]},"ModuleLists":{"main":[[{"node":"SplitModules","type":"main","index":0}]]},"Schedule Trigger":{"main":[[{"node":"meta","type":"main","index":0}]]},"Set":{"main":[[{"node":"getCalulateSum","type":"main","index":0}]]},"SplitModules":{"main":[[{"node":"Set","type":"main","index":0}]]},"getCalulateSum":{"main":[[{"node":"Item Lists","type":"main","index":0}]]},"Item Lists":{"main":[[{"node":"SplitItems","type":"main","index":0}]]},"updateCalulateSum":{"main":[[{"node":"ifDoneItem","type":"main","index":0}]]},"ifDoneItem":{"main":[[{"node":"SplitModules","type":"main","index":0}],[{"node":"SplitItems","type":"main","index":0}]]},"SplitItems":{"main":[[{"node":"updateCalulateSum","type":"main","index":0}]]}},"settings":{},"staticData":{"node:Schedule Trigger":{"recurrencyRules":[]}},"pinData":{},"versionId":"c2186efb-97fb-4f21-9afb-7f0b20d62ee1","triggerCount":1,"tags":[]}