{"createdAt":"2023-09-09T13:25:58.605Z","updatedAt":"2023-09-12T09:00:09.000Z","id":"518","name":"My workflow 40","active":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"1b91679a-ecce-4da8-95fd-123sacvcsc","options":{}},"id":"1a6c38e2-9ab8-4474-b66c-08cd7c0c9da1","name":"Webhook","type":"n8n-nodes-base.webhook","typeVersion":1,"position":[-380,500],"webhookId":"1b91679a-ecce-4da8-95fd-97b1fb15edbf"},{"parameters":{"values":{"string":[{"name":"appId","value":"cli_a4728c89b9b89010"},{"name":"appSecret","value":"VPxBThYjNh7CuRxNnXWQoGXCZmz7NWuP"},{"name":"baseId","value":"AYlRbXuWzaoThTsHtjult88dgMe"},{"name":"tableId","value":"tblqgYrHPrnMyIes"}]},"options":{}},"id":"3fdead3b-5a64-4eb1-a181-bb07ef5fe2cc","name":"Set","type":"n8n-nodes-base.set","typeVersion":2,"position":[-160,500]},{"parameters":{"method":"POST","url":"https://open.larksuite.com/open-apis/auth/v3/app_access_token/internal","sendBody":true,"specifyBody":"json","jsonBody":"={\n\"app_id\" : \"{{ $('Set').item.json[\"appId\"] }}\",\n\"app_secret\" : \"{{ $('Set').item.json[\"appSecret\"] }}\" \n}","options":{}},"id":"6ea25674-73a6-4066-85dd-760615415789","name":"get app_access_token","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[60,500]},{"parameters":{"method":"POST","url":"=https://open.larksuite.com/open-apis/bitable/v1/apps/{{ $('Set').item.json[\"baseId\"] }}/tables/{{ $('Set').item.json[\"tableId\"] }}/records","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $('get app_access_token').item.json[\"app_access_token\"] }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"fields\":\n  { \n    \"name\":\"\",\n    \"id\":\"\",\n    \"phone\":\"\",\n    \"status\":\"\",\n    \"product_id\":\"\",\n    \"variation_id\":\"\",\n    \"product_name\":\"\",\n    \"quantity\":,\n    \"total_price\":,\n    \"total_discount\":,\n    \"total_price_after_sub_discount\":,\n    \"nguon\":\"\",\n    \"phi_ship\":,\n    \"address\":\"\",\n    \"commnue_name\":\"\",\n    \"district_name\":\"\",\n    \"province_name\":\"\"\n   }\n}","options":{}},"id":"a8cff8b7-723f-4639-b1be-bb356dbc0f34","name":"Add base","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[520,300]},{"parameters":{"conditions":{"string":[{"value1":"={{ $('Webhook').item.json.body.status_name }}","value2":"new"}]}},"id":"41f2c97a-c910-42c1-a8f1-36187219c198","name":"IF","type":"n8n-nodes-base.if","typeVersion":1,"position":[280,500]},{"parameters":{"url":"=https://open.larksuite.com/open-apis/bitable/v1/apps/{{ $('Set').item.json[\"baseId\"] }}/tables/{{$('Set').item.json[\"tableId\"]}}/records?filter=CurrentValue.[id] = \"{{ $('Webhook').item.json[\"body\"][\"id\"] }}\"","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $('get app_access_token').item.json[\"app_access_token\"] }}"}]},"options":{}},"id":"ff422c44-545d-4af0-bd1f-c7bb568b6099","name":"Get record ID","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[520,680]},{"parameters":{"method":"PUT","url":"=https://open.larksuite.com/open-apis/bitable/v1/apps/{{ $('Set').item.json[\"baseId\"] }}/tables/{{$('Set').item.json[\"tableId\"]}}/records/{{ $('Get record ID').item.json[\"data\"][\"items\"][0][\"record_id\"] }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $('get app_access_token').item.json[\"app_access_token\"] }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"fields\":\n  { \n \"status\":\"\"\n   }\n}","options":{}},"id":"04aa95cd-71d4-4de7-9656-9c820303cfa1","name":"Update","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[700,680]}],"connections":{"Webhook":{"main":[[{"node":"Set","type":"main","index":0}]]},"Set":{"main":[[{"node":"get app_access_token","type":"main","index":0}]]},"get app_access_token":{"main":[[{"node":"IF","type":"main","index":0}]]},"IF":{"main":[[{"node":"Add base","type":"main","index":0}],[{"node":"Get record ID","type":"main","index":0}]]},"Get record ID":{"main":[[{"node":"Update","type":"main","index":0}]]}},"settings":{"saveManualExecutions":false,"callerPolicy":"workflowsFromSameOwner","errorWorkflow":"518"},"staticData":null,"pinData":{},"versionId":"66d53a5a-276b-4f86-9fd4-ebcc55ef5c0f","triggerCount":1,"tags":[]}